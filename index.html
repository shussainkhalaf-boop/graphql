<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>My Reboot01 Profile</title>
  <link rel="icon" href="data:," />
  <link rel="stylesheet" href="./style.css" />
  <meta name="color-scheme" content="dark light" />
  <script>
    // ---- Runtime configuration (override if you use a proxy) ----
    window.__CONFIG__ = {
      SIGNIN_URL: "https://learn.reboot01.com/api/auth/signin",
      GRAPHQL_URL: "https://learn.reboot01.com/api/graphql-engine/v1/graphql",
      TOKEN_KEY: "reboot01.jwt"
      // Optional: if you deploy a tiny proxy/worker, set SIGNIN_URL/GRAPHQL_URL to that.
    };
  </script>
</head>
<body>
  <div class="bg">
    <div class="orb orb1"></div>
    <div class="orb orb2"></div>
    <div class="gridlines"></div>
  </div>

  <header class="topbar glass">
    <div class="brand">
      <svg class="logo" viewBox="0 0 64 64" aria-hidden="true">
        <defs>
          <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="#7c3aed"/>
            <stop offset="100%" stop-color="#06b6d4"/>
          </linearGradient>
        </defs>
        <circle cx="32" cy="32" r="28" fill="none" stroke="url(#g)" stroke-width="6"/>
        <path d="M20 36 L32 16 L44 36 L32 48 Z" fill="url(#g)" />
      </svg>
      <strong>Reboot01 • Profile</strong>
    </div>
    <button id="logout-btn" class="btn subtle hidden">Logout</button>
  </header>

  <!-- Login Screen -->
  <main id="login-view" class="screen">
    <section class="card glass">
      <h1>Sign in</h1>
      <p class="muted">Use your platform username <em>or</em> email with your password.</p>
      <form id="login-form">
        <label>Username or Email
          <input id="identifier" name="identifier" autocomplete="username" required />
        </label>
        <label>Password
          <input id="password" name="password" type="password" autocomplete="current-password" required />
        </label>
        <button class="btn primary" type="submit">Sign in</button>
        <div id="login-error" class="error hidden"></div>
      </form>
    </section>
  </main>

  <!-- App Screen -->
  <main id="profile-view" class="screen hidden">
    <section class="card glass">
      <div class="row between center">
        <div>
          <h2 id="u-login">—</h2>
          <div class="muted small">ID: <span id="u-id">—</span></div>
        </div>
        <div class="stats">
          <div class="stat">
            <div class="label">Total XP</div>
            <div class="value" id="u-xp">0</div>
          </div>
          <div class="stat">
            <div class="label">Passed</div>
            <div class="value" id="u-pass">0</div>
          </div>
          <div class="stat">
            <div class="label">Failed</div>
            <div class="value" id="u-fail">0</div>
          </div>
        </div>
      </div>
    </section>

    <section class="grid two">
      <article class="card glass">
        <h3>XP over Time</h3>
        <svg id="chart-xp-time" viewBox="0 0 800 360" role="img" aria-label="XP over time"></svg>
        <div class="muted small" id="xp-time-note"></div>
      </article>
      <article class="card glass">
        <h3>Top Projects by XP</h3>
        <svg id="chart-xp-projects" viewBox="0 0 800 360" role="img" aria-label="Top projects by XP"></svg>
        <div class="muted small">Top 10 projects</div>
      </article>
      <article class="card glass">
        <h3>Pass / Fail Ratio</h3>
        <svg id="chart-passfail" viewBox="0 0 320 320" role="img" aria-label="Pass fail ratio"></svg>
        <div class="muted small" id="pf-note"></div>
      </article>
      <article class="card glass">
        <h3>Latest Results</h3>
        <ul id="latest-results" class="list"></ul>
        <div id="no-results" class="muted">No results yet.</div>
      </article>
    </section>
  </main>

  <footer class="foot muted small">
    <span>SVG graphs · Vanilla JS · JWT (Bearer)</span>
  </footer>

  <script type="module" src="./app.js"></script>
</body>
</html>
